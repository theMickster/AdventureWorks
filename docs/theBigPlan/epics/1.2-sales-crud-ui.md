# Epic 1.2: Sales CRUD UI

**Initiative**: [Initiative 1 - Sales + HR Management Web Application](../initiatives/01-sales-hr-web-application.md)
**Timeline**: Weeks 3-4
**Estimated Story Points**: 100-120
**Status**: Not Started

---

## Epic Overview

**As a business manager, I want to manage stores and sales personnel through a web interface, so that I can create, view, update, and list these entities efficiently with proper validation and error handling.**

---

## Epic Success Criteria (Gherkin Format)

**Given** the Sales CRUD UI is complete
**When** I use the application
**Then** I should be able to:
- ✅ View a paginated list of stores
- ✅ Create a new store with form validation
- ✅ Update an existing store
- ✅ View store details
- ✅ View a paginated list of sales persons
- ✅ Create a new sales person with form validation
- ✅ Update an existing sales person
- ✅ View sales person details
- ✅ See loading states during API calls
- ✅ See user-friendly error messages when operations fail

---

## Features

### Feature 1.2.1: Store List View

**As a user, I want to see a paginated list of all stores, so that I can browse and search stores easily.**

#### Acceptance Criteria
- **Given** I navigate to `/sales/stores`
- **When** the page loads
- **Then** I should see a table/grid of stores with columns: Name, Store Number, Sales Person, Demographics
- **And** the list should support pagination (10 items per page)
- **And** I should see buttons to "Create New Store" and "View Details"

#### Technical Notes
- **Key Files**: `libs/sales/feature-stores/src/lib/store-list/store-list.component.ts`
- **API Endpoint**: `GET /api/sales/stores?pageNumber=1&pageSize=10`
- **Testing**: Unit test for component, E2E test for navigation

#### Estimated Story Points: 8

---

### Feature 1.2.2: Store Create Form

**As a user, I want to create a new store with validation, so that I can add stores to the system.**

#### Acceptance Criteria
- **Given** I click "Create New Store"
- **When** the create form loads
- **Then** I should see form fields for: Name, Store Number, Sales Person (dropdown), Demographics
- **And** all required fields should be marked
- **And** submitting without required fields should show validation errors
- **And** submitting valid data should create the store and navigate to the list

#### Technical Notes
- **Key Files**: `libs/sales/feature-stores/src/lib/store-create/store-create.component.ts`
- **API Endpoint**: `POST /api/sales/stores`
- **Validation**: Matches backend FluentValidation rules
- **Testing**: Unit test for validation logic

#### Estimated Story Points: 13

---

### Feature 1.2.3: Store Update Form

**As a user, I want to update an existing store, so that I can correct or modify store information.**

#### Acceptance Criteria
- **Given** I click "Edit" on a store
- **When** the update form loads
- **Then** the form should be pre-filled with current store data
- **And** I should be able to modify fields
- **And** submitting valid changes should update the store
- **And** validation errors should be displayed if invalid

#### Technical Notes
- **Key Files**: `libs/sales/feature-stores/src/lib/store-update/store-update.component.ts`
- **API Endpoint**: `GET /api/sales/stores/{id}`, `PUT /api/sales/stores/{id}`
- **Testing**: Unit test for update logic

#### Estimated Story Points: 13

---

### Feature 1.2.4: Store Detail View

**As a user, I want to view detailed information about a store, so that I can see all store attributes.**

#### Acceptance Criteria
- **Given** I click "View Details" on a store
- **When** the detail page loads
- **Then** I should see all store information displayed
- **And** I should see buttons to "Edit" and "Back to List"

#### Technical Notes
- **Key Files**: `libs/sales/feature-stores/src/lib/store-detail/store-detail.component.ts`
- **API Endpoint**: `GET /api/sales/stores/{id}`
- **Testing**: Unit test for component

#### Estimated Story Points: 8

---

### Feature 1.2.5: Sales Person List View

**As a user, I want to see a paginated list of all sales persons, so that I can browse and search sales personnel.**

#### Acceptance Criteria
- **Given** I navigate to `/sales/salespersons`
- **When** the page loads
- **Then** I should see a table/grid of sales persons with columns: Name, Territory, Quota, Sales YTD, Bonus
- **And** the list should support pagination
- **And** I should see buttons to "Create New" and "View Details"

#### Technical Notes
- **Key Files**: `libs/sales/feature-salespersons/src/lib/salesperson-list/salesperson-list.component.ts`
- **API Endpoint**: `GET /api/sales/salespersons?pageNumber=1&pageSize=10`
- **Testing**: Unit test, E2E test

#### Estimated Story Points: 8

---

### Feature 1.2.6: Sales Person Create Form

**As a user, I want to create a new sales person, so that I can add sales personnel to the system.**

#### Acceptance Criteria
- **Given** I click "Create New Sales Person"
- **When** the create form loads
- **Then** I should see form fields for: Name, Territory (dropdown), Quota, Commission %
- **And** validation should match backend rules
- **And** submitting valid data should create the sales person

#### Technical Notes
- **Key Files**: `libs/sales/feature-salespersons/src/lib/salesperson-create/salesperson-create.component.ts`
- **API Endpoint**: `POST /api/sales/salespersons`
- **Testing**: Unit test for validation

#### Estimated Story Points: 13

---

### Feature 1.2.7: Sales Person Update Form

**As a user, I want to update an existing sales person, so that I can modify sales personnel information.**

#### Acceptance Criteria
- **Given** I click "Edit" on a sales person
- **When** the update form loads
- **Then** the form should be pre-filled with current data
- **And** I should be able to modify fields
- **And** submitting updates the sales person

#### Technical Notes
- **Key Files**: `libs/sales/feature-salespersons/src/lib/salesperson-update/salesperson-update.component.ts`
- **API Endpoint**: `GET /api/sales/salespersons/{id}`, `PUT /api/sales/salespersons/{id}`
- **Testing**: Unit test

#### Estimated Story Points: 13

---

### Feature 1.2.8: Sales Person Detail View

**As a user, I want to view detailed information about a sales person.**

#### Acceptance Criteria
- **Given** I click "View Details" on a sales person
- **When** the detail page loads
- **Then** I should see all sales person information
- **And** I should see sales performance metrics (quota, YTD sales, bonus)

#### Technical Notes
- **Key Files**: `libs/sales/feature-salespersons/src/lib/salesperson-detail/salesperson-detail.component.ts`
- **API Endpoint**: `GET /api/sales/salespersons/{id}`
- **Testing**: Unit test

#### Estimated Story Points: 8

---

### Feature 1.2.9: TypeScript Models and DTOs

**As a developer, I want TypeScript interfaces matching backend DTOs, so that API calls are type-safe.**

#### Acceptance Criteria
- **Given** the backend API has Store and SalesPerson DTOs
- **When** I create TypeScript interfaces
- **Then** the interfaces should match the backend structure exactly
- **And** the interfaces should be used in API service methods

#### Technical Notes
- **Key Files**:
  - `libs/sales/data-access/src/lib/models/store.model.ts`
  - `libs/sales/data-access/src/lib/models/sales-person.model.ts`
- **Testing**: Compile-time type checking

#### Estimated Story Points: 5

---

### Feature 1.2.10: Form Validation Matching Backend

**As a developer, I want frontend validation to match backend validation rules, so that users get immediate feedback.**

#### Acceptance Criteria
- **Given** the backend has FluentValidation rules
- **When** I implement frontend validation
- **Then** required fields should match backend requirements
- **And** string length limits should match backend
- **And** format validations (email, phone) should match backend
- **And** validation error messages should be user-friendly

#### Technical Notes
- **Key Files**: Validation logic in create/update components
- **Backend Reference**: `Application/Sales/Stores/Commands/CreateStore/CreateStoreCommandValidator.cs`
- **Testing**: Unit tests for validation

#### Estimated Story Points: 8

---

## Epic Summary

### Total Estimated Story Points: 105

### Features Count: 10 Features

### Key Deliverables
- ✅ Complete CRUD for Stores (list, create, update, detail)
- ✅ Complete CRUD for Sales Persons (list, create, update, detail)
- ✅ TypeScript interfaces matching backend DTOs
- ✅ Form validation matching backend rules
- ✅ Loading states and error handling
- ✅ Pagination for list views
- ✅ Unit test coverage for components

---

**Document Version**: 1.0
**Last Updated**: 2026-01-17
**Status**: Ready for Implementation
