# Epic 1.4: Real-Time Dashboard

**Initiative**: [Initiative 1 - Sales + HR Management Web Application](../initiatives/01-sales-hr-web-application.md)
**Timeline**: Weeks 7-8
**Estimated Story Points**: 80-100
**Status**: Not Started

---

## Epic Overview

**As a manager, I want a dashboard with real-time metrics and visualizations for Sales and HR data, so that I can monitor business operations and see live updates when data changes.**

---

## Epic Success Criteria (Gherkin Format)

**Given** the Real-Time Dashboard is complete
**When** I view the dashboard
**Then** I should see:
- ✅ Total counts for stores, sales persons, employees, and departments
- ✅ Visual charts (bar, pie, line) representing data trends
- ✅ Real-time updates via SignalR when entities are created, updated, or deleted
- ✅ Toast notifications indicating what changed
- ✅ Smooth transitions when data updates

---

## Features

### Feature 1.4.1: SignalR Hub Connection Service
**As a developer, I want a SignalR service managing hub connections, so that the frontend can receive real-time updates.**

**Acceptance Criteria**: Service connects to SignalR hubs, handles reconnection, exposes observables for events.
**Key Files**: `libs/shared/signalr/src/lib/services/signalr.service.ts`
**Backend**: API must have SignalR hubs configured
**Estimated Story Points**: 13

---

### Feature 1.4.2: Dashboard Layout and Metrics
**As a user, I want to see key metrics on the dashboard.**

**Acceptance Criteria**: Display cards for: Total Stores, Total Sales Persons, Total Employees, Total Departments.
**API Endpoint**: `GET /api/dashboard/metrics`
**Estimated Story Points**: 8

---

### Feature 1.4.3: Sales Metrics Visualization
**As a user, I want visual charts showing sales data.**

**Acceptance Criteria**: Bar chart for "Stores by Territory", pie chart for "Sales Persons by Territory", line chart for "Sales Trend".
**Chart Library**: Chart.js or ng2-charts
**Estimated Story Points**: 13

---

### Feature 1.4.4: HR Metrics Visualization
**As a user, I want visual charts showing HR data.**

**Acceptance Criteria**: Bar chart for "Employees by Department", pie chart for "Employees by Gender", line chart for "Hiring Trend".
**Estimated Story Points**: 13

---

### Feature 1.4.5: Real-Time Updates for Sales Entities
**As a user, I want to see real-time updates when stores or sales persons change.**

**Acceptance Criteria**: When a store/sales person is created/updated/deleted, dashboard metrics update automatically, toast notification appears.
**SignalR Events**: `StoreCreated`, `StoreUpdated`, `StoreDeleted`, `SalesPersonCreated`, etc.
**Estimated Story Points**: 13

---

### Feature 1.4.6: Real-Time Updates for HR Entities
**As a user, I want to see real-time updates when employees or departments change.**

**Acceptance Criteria**: When an employee/department is created/updated/deleted, dashboard metrics update automatically, toast notification appears.
**SignalR Events**: `EmployeeCreated`, `EmployeeUpdated`, etc.
**Estimated Story Points**: 13

---

### Feature 1.4.7: Toast Notifications for Real-Time Events
**As a user, I want toast notifications when data changes in real-time.**

**Acceptance Criteria**: Toast appears with message like "New store created: Store Name", auto-dismiss after 5 seconds, non-intrusive placement.
**Key Files**: `libs/shared/ui/src/lib/components/toast/toast.component.ts`
**Estimated Story Points**: 8

---

### Feature 1.4.8: E2E Test for Real-Time Scenario
**As a developer, I want an E2E test validating real-time updates work.**

**Acceptance Criteria**: Test opens two browser windows, creates entity in one, verifies update appears in other.
**Testing**: Playwright multi-window scenario
**Estimated Story Points**: 13

---

## Epic Summary

### Total Estimated Story Points: 94

### Key Deliverables
- ✅ SignalR integration with hub connection management
- ✅ Dashboard displaying Sales + HR metrics
- ✅ Visual charts (bar, pie, line) for data trends
- ✅ Real-time updates when entities change
- ✅ Toast notifications for live events
- ✅ E2E test for real-time functionality

---

**Document Version**: 1.0
**Last Updated**: 2026-01-17
**Status**: Ready for Implementation
